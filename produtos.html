<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <title>Loja Brasileira</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Cabeçalho -->
    <header>
        <h1>Loja Brasileira</h1>
        <p>Produtos com a cara do Brasil</p>
        <!-- Botão para visualizar o carrinho -->
        <button id="viewCartButton" class="cart-button">
            <i class="fas fa-shopping-cart"></i> Ver Carrinho
        </button>
    </header>

    <!-- Menu de navegação -->
    <nav>
        <ul>
            <li><a href="index.html">Início</a></li>
            <li><a href="produtos.html">Produtos</a></li>
            <li><a href="promocoes.html">Promoções</a></li>
            <li><a href="contato.html">Contato</a></li>
        </ul>
    </nav>

    <!-- Conteúdo principal -->
    <div class="container">
        <h2>Todos os Produtos</h2>
        <div class="products">
            <!-- Produto 1 -->
            <div class="product-card" data-product-id="1">
                <img src="https://via.placeholder.com/300x300" alt="Produto 1">
                <h2>Produto 1</h2>
                <p>Descrição do produto 1.</p>
                <p><strong>R$ 99,90</strong></p>
                <button class="add-to-cart">Adicionar ao Carrinho</button>
            </div>

            <!-- Produto 2 -->
            <div class="product-card" data-product-id="2">
                <img src="https://via.placeholder.com/300x300" alt="Produto 2">
                <h2>Produto 2</h2>
                <p>Descrição do produto 2.</p>
                <p><strong>R$ 199,90</strong></p>
                <button class="add-to-cart">Adicionar ao Carrinho</button>
            </div>

            <!-- Produto 3 -->
            <div class="product-card" data-product-id="3">
                <img src="https://via.placeholder.com/300x300" alt="Produto 3">
                <h2>Produto 3</h2>
                <p>Descrição do produto 3.</p>
                <p><strong>R$ 299,90</strong></p>
                <button class="add-to-cart">Adicionar ao Carrinho</button>
            </div>

            <!-- Produto 4 -->
            <div class="product-card" data-product-id="4">
                <img src="https://via.placeholder.com/300x300" alt="Produto 4">
                <h2>Produto 4</h2>
                <p>Descrição do produto 4.</p>
                <p><strong>R$ 399,90</strong></p>
                <button class="add-to-cart">Adicionar ao Carrinho</button>
            </div>

            <!-- Produto 5 -->
            <div class="product-card" data-product-id="5">
                <img src="https://via.placeholder.com/300x300" alt="Produto 5">
                <h2>Produto 5</h2>
                <p>Descrição do produto 5.</p>
                <p><strong>R$ 499,90</strong></p>
                <button class="add-to-cart">Adicionar ao Carrinho</button>
            </div>

            <!-- Produto 6 -->
            <div class="product-card" data-product-id="6">
                <img src="https://via.placeholder.com/300x300" alt="Produto 6">
                <h2>Produto 6</h2>
                <p>Descrição do produto 6.</p>
                <p><strong>R$ 599,90</strong></p>
                <button class="add-to-cart">Adicionar ao Carrinho</button>
            </div>
        </div>
    </div>

    <!-- Modal do Carrinho -->
    <div class="cart-modal" id="cartModal" style="display: none;">
        <div class="cart-content">
            <h2>Carrinho</h2>
            <div id="cartItems"></div>
            <button id="checkoutButton" style="display: none; margin-top: 20px;">Finalizar Compra</button>
            <button id="closeCartButton">Fechar</button>
        </div>
    </div>

    <!-- Rodapé -->
    <footer>
        <p>Loja Brasileira - Todos os direitos reservados &copy; 2024</p>
    </footer>

    <script>
        let cart = [];

        // Função para carregar o carrinho do LocalStorage
        function loadCart() {
            const storedCart = localStorage.getItem('cart');
            if (storedCart) {
                cart = JSON.parse(storedCart);
            }
        }

        // Função para salvar o carrinho no LocalStorage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Carrega o carrinho ao iniciar a página
        loadCart();

        // Evento para adicionar produtos ao carrinho
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function() {
                const productCard = this.closest('.product-card');
                const productId = productCard.getAttribute('data-product-id');
                const productName = productCard.querySelector('h2').textContent;
                const productPrice = productCard.querySelector('strong').textContent;

                // Adiciona o produto ao carrinho
                cart.push({ id: productId, name: productName, price: productPrice });
                saveCart(); // Salva o carrinho no LocalStorage
                alert(`${productName} adicionado ao carrinho!`);
                displayCart();
            });
        });

        // Evento para visualizar o carrinho
        document.getElementById('viewCartButton').addEventListener('click', function() {
            displayCart();
            document.getElementById('cartModal').style.display = 'flex';
        });

        // Evento para fechar o modal do carrinho
        document.getElementById('closeCartButton').addEventListener('click', function() {
            document.getElementById('cartModal').style.display = 'none';
        });

        // Função para exibir os itens do carrinho
        function displayCart() {
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = ''; // Limpa o conteúdo atual do carrinho

            if (cart.length === 0) {
                cartItems.innerHTML = '<p>O carrinho está vazio.</p>';
                document.getElementById('checkoutButton').style.display = 'none'; // Esconde o botão de finalizar compra
                return;
            }

            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');
                cartItem.innerHTML = `
                    <span>${item.name} - ${item.price}</span>
                    <button onclick="removeFromCart('${item.id}')">Remover</button>
                `;
                cartItems.appendChild(cartItem);
            });

            // Mostra o botão de finalizar compra
            document.getElementById('checkoutButton').style.display = 'block';
        }

        // Função para remover itens do carrinho
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart(); // Atualiza o LocalStorage após remover o item
            displayCart();
        }

        // Evento para finalizar a compra
        document.getElementById('checkoutButton').addEventListener('click', function() {
            if (cart.length === 0) {
                alert("O carrinho está vazio. Adicione produtos antes de finalizar a compra.");
                return;
            }

            // Exibir mensagem de confirmação
            alert("Compra finalizada com sucesso! Obrigado pela sua compra.");

            // Limpa o carrinho e o LocalStorage
            cart = [];
            saveCart();
            displayCart();

            // Fecha o modal após a compra ser finalizada
            document.getElementById('cartModal').style.display = 'none';
        });

    </script>
</body>
</html>
